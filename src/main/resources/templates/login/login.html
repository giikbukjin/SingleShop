<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Shopping Mall</title>
  <!-- 아이콘 -->
  <link rel="icon" type="image/png" sizes="16x16" href="/elice-rabbit-favicon.png"/>
  <!-- bulma css 관련 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css"/>
  <!-- 폰트 어썸: 아이콘 -->
  <script defer src="https://kit.fontawesome.com/9daa42bcef.js" crossorigin="anonymous"></script>
  <!-- 커스텀 css -->
  <link rel="stylesheet" href="/templates/login/login.css"/>
</head>
<body>
<!-- 헤더 -->
<nav class="navbar" role="navigation" aria-label="main navigation">
  <div class="container mt-3">
    <div class="navbar-brand">
      <a class="navbar-item" href="/static">
        <img src="/templates/products/img/elice-rabbit.png" width="30" height="30"/>
        <span class="has-text-link">Shopping Mall</span>
      </a>

      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false"
         data-target="navbarBasicExample">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div id="navbarBasicExample" class="navbar-menu">
      <div class="navbar-end breadcrumb my-auto" aria-label="breadcrumbs">
        <ul id="navbar">
          <li>
            <a href="/cart" aria-current="page">
              <span class="icon">
                <i class="fas fa-cart-shopping"></i>
              </span>
              <span>카트</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>

<!-- 로그인 폼(Form) -->
<div class="login-form-container">
  <form class="box login-form-box" id="loginForm" th:action="@{/auth/login}" th:object="${login}" method="post">
    <p class="title is-5 has-text-info">어서오세요!</p>
    <div class="field">
      <label class="label" for="emailInput">이메일</label>
      <div class="control">
        <input class="input" id="emailInput" th:field="*{email}" type="email" placeholder="abc@example.com" autocomplete="on"/>
      </div>
    </div>

    <div class="field mb-5">
      <label class="label" for="passwordInput">비밀번호</label>
      <div class="control">
        <input class="input" id="passwordInput" th:field="*{password}" type="password" placeholder="********" autocomplete="on"/>
      </div>
    </div>

    <button class="button is-info is-fullwidth" id="submitButton" type="submit">로그인하기</button>
  </form>
</div>

<!-- JavaScript 코드 -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const loginForm = document.getElementById('loginForm');
    const emailInput = document.getElementById('emailInput');
    const passwordInput = document.getElementById('passwordInput');

    loginForm.addEventListener('submit', function (event) {
      event.preventDefault(); // Prevent form submission

      // Validate email
      if (!validateEmail(emailInput.value.trim())) {
        alert('유효한 이메일을 입력하세요.');
        return;
      }

      // Validate password
      if (!validatePassword(passwordInput.value.trim())) {
        alert('비밀번호는 6자 이상이어야 합니다.');
        return;
      }

      // If both email and password are valid, submit the form
      loginForm.submit();
    });

    // Function to validate email
    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(String(email).toLowerCase());
    }

    // Function to validate password
    function validatePassword(password) {
      return password.length >= 8 && password.length <= 15;
    }
  });
</script>
</body>
</html>
